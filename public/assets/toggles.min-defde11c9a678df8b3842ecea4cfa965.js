!function(t){t.fn.toggles=function(e){function i(t,e,i,s){var c=t.toggleClass("active").hasClass("active");if(s!==c){var l=t.find(".toggle-inner").css(a);if(t.find(".toggle-off").toggleClass("active"),t.find(".toggle-on").toggleClass("active"),n.checkbox.prop("checked",c),!o){var r=c?0:-e+i;l.css("margin-left",r),setTimeout(function(){l.css(g),l.css("margin-left",r)},n.animate)}}}e=e||{};var n=t.extend({drag:!0,click:!0,text:{on:"ON",off:"OFF"},on:!1,animate:250,transition:"ease-in-out",checkbox:null,clicker:null,width:50,height:20,type:"compact"},e),o="select"==n.type;n.checkbox=t(n.checkbox),n.clicker&&(n.clicker=t(n.clicker)),e="margin-left "+n.animate+"ms "+n.transition;var a={"-webkit-transition":e,"-moz-transition":e,transition:e},g={"-webkit-transition":"","-moz-transition":"",transition:""};return this.each(function(){var e=t(this),a=e.height(),g=e.width();a&&g||(e.height(a=n.height),e.width(g=n.width));var s=t('<div class="toggle-slide">'),c=t('<div class="toggle-inner">'),l=t('<div class="toggle-on">'),r=t('<div class="toggle-off">'),f=t('<div class="toggle-blob">'),h=a/2,m=g-h;if(l.css({height:a,width:m,textAlign:"center",textIndent:o?"":-h,lineHeight:a+"px"}).html(n.text.on),r.css({height:a,width:m,marginLeft:o?"":-h,textAlign:"center",textIndent:o?"":h,lineHeight:a+"px"}).html(n.text.off).addClass("active"),f.css({height:a,width:a,marginLeft:-h}),c.css({width:2*g-a,marginLeft:o?0:-g+a}),o&&(s.addClass("toggle-select"),e.css("width",2*m),f.hide()),e.html(s.html(c.append(l,f,r))),s.on("toggle",function(t,n){t&&t.stopPropagation(),i(s,g,a),e.trigger("toggle",!n)}),e.on("toggleOn",function(){i(s,g,a,!1)}),e.on("toggleOff",function(){i(s,g,a,!0)}),n.on&&i(s,g,a),!n.click||n.clicker&&n.clicker.has(e).length||e.on("click",function(t){(t.target!=f[0]||!n.drag)&&s.trigger("toggle",s.hasClass("active"))}),n.clicker&&n.clicker.on("click",function(t){(t.target!=f[0]||!n.drag)&&s.trigger("toggle",s.hasClass("active"))}),n.drag&&!o){var d,u=(g-a)/4,v=function(t){e.off("mousemove"),s.off("mouseleave"),f.off("mouseup");var i=s.hasClass("active");!d&&n.click&&"mouseleave"!==t.type?s.trigger("toggle",i):i?-u>d?s.trigger("toggle",i):c.animate({marginLeft:0},n.animate/2):d>u?s.trigger("toggle",i):c.animate({marginLeft:-g+a},n.animate/2)},k=-g+a;f.on("mousedown",function(t){d=0,f.off("mouseup"),s.off("mouseleave");var i=t.pageX;e.on("mousemove",f,function(t){d=t.pageX-i,s.hasClass("active")?(t=d,d>0&&(t=0),k>d&&(t=k)):(t=d+k,0>d&&(t=k),d>-k&&(t=0)),c.css("margin-left",t)}),f.on("mouseup",v),s.on("mouseleave",v)})}})}}(jQuery);