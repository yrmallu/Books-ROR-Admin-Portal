!function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.super_=e}function s(e,s){var i=t.extend({"class":null,searchbar:!1},s);this._parent=e,this._settings=i,this._createListbox(),this._parent.css("display","none")}function i(t,e){this.super_.call(this,t,e),this._selected||this.onItemClick(this._list.children().first())}function r(t,e){this.super_.call(this,t,e)}var a="lbjs",n="lbjs-list",h="lbjs-item",o="lbjs-searchbar";s.prototype._createListbox=function(){this._listbox=t("<div>").addClass(a).addClass(this._settings["class"]).insertAfter(this._parent),this._settings.searchbar&&this._createSearchbar(),this._createList()},s.prototype._createSearchbar=function(){var e=t("<div>").addClass(o+"-wrapper").appendTo(this._listbox),s=t("<input>").addClass(o).appendTo(e).attr("placeholder","search..."),i=this;s.keyup(function(){var e=t(this).val().toLowerCase();i._list.children().each(""!==e?function(){var s=t(this).text().toLowerCase();-1!=s.search("^"+e)?t(this).css("display","block"):t(this).css("display","none")}:function(){t(this).css("display","block")}),i.onFilterChange&&i.onFilterChange()}),this._searchbarWrapper=e},s.prototype._createList=function(){this._list=t("<div>").addClass(n).appendTo(this._listbox),this._resizeListToListbox();var e=this;this._parent.children().each(function(){e.addItem(t(this))})},s.prototype.addItem=function(e){var s=this,i=t("<div>").addClass(h).appendTo(this._list).text(e.text()).click(function(){s.onItemClick(t(this))});e.attr("disabled")&&i.attr("disabled",""),e.attr("selected")&&this.onItemClick(i)},s.prototype.removeItem=function(){},s.prototype._resizeListToListbox=function(){var t=this._listbox.height();this._settings.searchbar&&(t-=this._searchbarWrapper.outerHeight(!0)),this._list.height(t)},e(i,s),i.prototype.onItemClick=function(e){if(!e.attr("disabled")){this._selected&&this._selected.removeAttr("selected"),this._selected=e.attr("selected","");var s=t(this._parent.children().get(e.index()));this._parent.val(s.val()),this._parent.trigger("change")}},i.prototype.onFilterChange=function(){this._selected&&this._selected.is(":visible")||this.onItemClick(this._list.children(":visible").first())},e(r,s),r.prototype.onItemClick=function(e){if(!e.attr("disabled")){var s=t(this._parent.children().get(e.index())),i=this._parent.val();if(e.attr("selected")){e.removeAttr("selected");var r=i.indexOf(s.val());i.splice(r,1)}else e.attr("selected",""),i||(i=[]),i.push(s.val());this._parent.val(i),this._parent.trigger("change")}},t.fn.listbox=function(e){return this.each(function(){return t(this).attr("multiple")?!!new r(t(this),e):!!new i(t(this),e)})}}(jQuery);